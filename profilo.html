<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profilo Cliente - Tessitore</title>
    <link rel="stylesheet" href="cliente.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Stili per la pagina Profilo */
        .profile-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }
        .form-group h4 {
            margin-top: 0;
            color: #007bff;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }
        .form-row > div {
            flex: 1;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        input[disabled] {
            background-color: #f5f5f5;
            cursor: not-allowed;
        }
        /* Stile per la checkbox a riga singola */
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 15px;
        }
        .checkbox-container input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

    </style>
</head>
<body>
    <header class="header">
        <div class="logo">Cliente: Caricamento...</div>
        <nav class="nav">
            <a href="cliente.html">Nuovo Preventivo</a>
            <a href="cliente.html#ordini" id="mieiOrdiniBtn">I Miei Ordini</a>
            <a href="profilo.html" class="active">Il Mio Profilo</a> 
            <a href="#" id="logoutBtn">Logout</a>
        </nav>
    </header>

    <main class="container">
        <div class="profile-container">
            <h2>Il Mio Profilo e Dati Aziendali</h2>
            <p>Aggiorna i tuoi dati di fatturazione e spedizione.</p>
            <form id="profileForm">
                <input type="hidden" id="userId">
                
                <div class="form-group">
                    <h4>Dati di Contatto e Aziendali</h4>
                    <div class="form-row">
                        <div>
                            <label for="email">Email (Login):</label>
                            <input type="text" id="email" disabled>
                        </div>
                        <div>
                            <label for="ragione_sociale">Ragione Sociale/Nome:</label>
                            <input type="text" id="ragione_sociale">
                        </div>
                    </div>
                    <div class="form-row">
                        <div>
                            <label for="partita_iva">Partita IVA:</label>
                            <input type="text" id="partita_iva">
                        </div>
                        <div>
                            <label for="telefono">Telefono: <span style="color: red;">* Obbligatorio</span></label>
                            <input type="text" id="telefono">
                        </div>
                    </div>
                    <div class="form-row">
                         <div>
                            <label for="sdi">Codice SDI/PEC:</label>
                            <input type="text" id="sdi">
                        </div>
                        <div>
                            <label for="percentuale_sconto">Sconto Assegnato (%):</label>
                            <input type="number" id="percentuale_sconto" disabled>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <h4>Indirizzo Legale (Fatturazione)</h4>
                    <label for="legale_via">Via e Numero Civico:</label>
                    <input type="text" id="legale_via">
                    <div class="form-row">
                        <div>
                            <label for="legale_cap">CAP:</label>
                            <input type="text" id="legale_cap">
                        </div>
                        <div>
                            <label for="legale_citta">Città:</label>
                            <input type="text" id="legale_citta">
                        </div>
                        <div>
                            <label for="legale_provincia">Provincia:</label>
                            <input type="text" id="legale_provincia">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <h4>Indirizzo Destinazione Merce</h4>
                    <div class="checkbox-container">
                        <input type="checkbox" id="stesso_indirizzo_merce" onchange="toggleMerceAddressFields(this.checked)">
                        <label for="stesso_indirizzo_merce">L'indirizzo di spedizione è lo stesso della sede legale.</label>
                    </div>

                    <div id="merceAddressFields">
                        <label for="merce_via">Via e Numero Civico Merce:</label>
                        <input type="text" id="merce_via">
                        <div class="form-row">
                            <div>
                                <label for="merce_cap">CAP Merce:</label>
                                <input type="text" id="merce_cap">
                            </div>
                            <div>
                                <label for="merce_citta">Città Merce:</label>
                                <input type="text" id="merce_citta">
                            </div>
                            <div>
                                <label for="merce_provincia">Provincia Merce:</label>
                                <input type="text" id="merce_provincia">
                            </div>
                        </div>
                    </div>
                </div>

                <button type="submit" style="width: 100%; padding: 15px; background-color: #28a745; color: white; border: none; border-radius: 4px; font-size: 1.1em; cursor: pointer;">Salva Modifiche</button>
            </form>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="profilo.js"></script>
</body>
</html>
